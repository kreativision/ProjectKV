{% extends 'main.layout.html' %}
{% set active='account_info' %}
{% block page_style%}
<link rel="stylesheet" href="{{url_for('BP_account.static', filename='styles/BP_account.css')}}">
{% endblock page_style %}

{%block body_content%}
<div class="container-fluid px-1">
    <div class="container">
        <div class="row">
            <div class="col-md-4 col-sm-12">
                <div class="card">
                    <!-- <img class="card-img-top"  src="{{url_for('BP_account.static', filename='images/defaultimg.jpg')}}"> -->
                    <div class="card-header d-flex justify-content-center border-0">
                    
                    
                  
                        <img style="width: 150px;height: 250px;border-radius: 50%;"
                            src={{dp_file}} alt=""
                            class="mt-3">
                        
                            
                    </div>
                    <label class="btn btn-sm btn-warning edit-img-btn shadow position-inherit" for="dpForm-dp_image">
                        <i class="fas fa-pencil-alt"></i>
                    </label>
                    <div class="card-body">
                        <h4 class="card-title">{{current_user.username}}</h4>
                        <p id="userEmail" class="card-text">{{current_user.email}}</p>
                        <p class="card-text">{{current_user.contact}}</p>
                        <p class="card-text">{{current_user.date}}</p>
                        
                    </div>
                </div>
            </div>
            
            <div class="col-md-8 col-sm-12 d-flex flex-column align-items-center pt-top-5">
                <a href="#"  class="btn btn-default my-3" data-toggle="modal" data-target="#infoModal">
                    Edit
                  </a>
                  <a href="#"  class="btn btn-default my-3" data-toggle="modal" data-target="#pwdModal">
                    Change Password
                  </a>
                <a href="#" class="btn btn-default my-5">
                    Gallery
                </a>
                <a href="#" class="btn btn-default my-5">
                    Review
                </a>
            </div>
        </div>
    </div>
    
</div>
<div class="modal fade" id="infoModal" tabindex="-1" role="dialog" aria-labelledby="infoModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content bg-dark border-0">
        <div class="modal-header d-flex flex-column align-items-center border-warning">
          <h3 class="modal-title text-light" id="infoModalLabel">Edit Account Info</h3>
          <small class="font-italic text-light">Change the data you wish to update.</small>
        </div>
  
        <form action="" method="POST" id="updateForm">
          {{updateForm.hidden_tag()}}
          <fieldset>
            <div class="modal-body {{'info-invalid' if updateForm.errors else ''}}">
              <div class="container bg-light f-field">
                <div class="form-group">
                  {{updateForm.username(class="form-control")}}
                  {{updateForm.username.label(class="form-control-label")}}
                  <div class="invalid-feedback">
                    <span><i class="fas fa-times-circle mr-2"></i></span><span id="name_error"></span>
                  </div>
                </div>
              </div>
              <div class="container bg-light f-field">
                <div class="form-group">
                  {{updateForm.email(class="form-control")}}
                  {{updateForm.email.label(class="form-control-label")}}
                  <div class="invalid-feedback">
                    <span><i class="fas fa-times-circle mr-2"></i></span><span id="email_error"></span>
                  </div>
                </div>
              </div>
              <div class="container bg-light f-field">
                <div class="form-group">
                  {{updateForm.contact(class="form-control")}}
                  {{updateForm.contact.label(class="form-control-label")}}
                  <div class="invalid-feedback">
                    <span><i class="fas fa-times-circle mr-2"></i></span><span id="contact_error"></span>
                  </div>
                </div>
              </div>
              <div class="container bg-light f-field">
                <div class="form-group">
                  {% if updateForm.password.errors %}
                  {{updateForm.password(class="form-control is-invalid")}}
                  <div class="invalid-feedback">
                    {% for error in updateForm.password.errors %}
                    <span><i class="fas fa-times-circle mr-2"></i></span><span id="password_error">{{error}}</span>
                    {% endfor %}
                  </div>
                  {% else %}
                  {{updateForm.password(class="form-control")}}
                  {% endif %}
                  {% if not updateForm.password.errors %}
                  <div class="invalid-feedback">
                    <span><i class="fas fa-times-circle mr-2"></i></span><span id="password_error"></span>
                  </div>
                  {% endif %}
                  <small class="helper-text font-italic text-muted">Password needed to make changes.</small>
                  {{updateForm.password.label(class="form-control-label")}}
                </div>
              </div>
            </div>
            <div class="modal-footer border-0">
              <input type="hidden" name="form" value="info">
              <button type="button" class="btn btn-sm shadow btn-secondary" data-dismiss="modal">Cancel</button>
              {{updateForm.submitInfo(class="btn btn-sm btn-warning shadow")}}
            </div>
          </fieldset>
        </form>
      </div>
    </div>
  </div>
  <div class="modal fade" id="pwdModal" tabindex="-1" role="dialog" aria-labelledby="pwdModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content bg-dark border-0">
        <div class="modal-header d-flex flex-column align-items-center border-warning">
          <h3 class="modal-title text-light" id="infoModalLabel">Change Password</h3>
        </div>
  
        <form action="" id="pwdForm" method="POST">
          {{pwdForm.hidden_tag()}}
          <fieldset>
            <div class="modal-body {{'info-invalid' if pwdForm.errors else ''}}">
              <div class="container bg-light f-field">
                <div class="form-group">
                  {% if pwdForm.current.errors %}
                  {{pwdForm.current(class="form-control is-invalid")}}
                  <div class="invalid-feedback">
                    {% for error in pwdForm.current.errors %}
                    <span><i class="fas fa-times-circle mr-2"></i></span><span id="password_error">{{error}}</span>
                    {% endfor %}
                  </div>
                  {% else %}
                  {{pwdForm.current(class="form-control")}}
                  {% endif %}
                  {{pwdForm.current.label(class="form-control-label")}}
                </div>
              </div>
              <div class="container bg-light f-field">
                <div class="form-group">
                  {% if pwdForm.new_password.errors %}
                  {{pwdForm.new_password(class="form-control is-invalid")}}
                  <div class="invalid-feedback">
                    {% for error in pwdForm.new_password.errors %}
                    <span><i class="fas fa-times-circle mr-2"></i></span><span id="confirm_password">{{error}}</span>
                    {% endfor %}
                  </div>
                  {% else %}
                  {{pwdForm.new_password(class="form-control")}}
                  {% endif %}
                  {{pwdForm.new_password.label(class="form-control-label")}}
                  {% if not pwdForm.new_password.errors %}
                  <div class="invalid-feedback">
                    <span><i class="fas fa-times-circle mr-2"></i></span><span id="new_password"></span>
                  </div>
                  {% endif %}
                </div>
              </div>
              <div class="container bg-light f-field">
                <div class="form-group">
                  {% if pwdForm.confirm_new_password.errors %}
                  {{pwdForm.confirm_new_password(class="form-control is-invalid")}}
                  <div class="invalid-feedback">
                    {% for error in pwdForm.confirm_new_password.errors %}
                    <span><i class="fas fa-times-circle mr-2"></i></span><span id="confirm_password">{{error}}</span>
                    {% endfor %}
                  </div>
                  {% else %}
                  {{pwdForm.confirm_new_password(class="form-control")}}
                  {% endif %}
                  {% if not pwdForm.confirm_new_password.errors %}
                  <div class="invalid-feedback">
                    <span><i class="fas fa-times-circle mr-2"></i></span><span id="confirm_password"></span>
                  </div>
                  {% endif %}
                  {{pwdForm.confirm_new_password.label(class="form-control-label")}}
                </div>
              </div>
            </div>
            <div class="modal-footer border-0">
              <input type="hidden" name="form" value="pwd">
              <button type="button" class="btn btn-sm shadow btn-secondary" data-dismiss="modal">Cancel</button>
              {{pwdForm.submitPwd(class="btn btn-sm btn-warning shadow")}}
            </div>
          </fieldset>
        </form>
      </div>
    </div>
  </div>

{%endblock%}
{% block page_scripts%}<script src="{{url_for('BP_account.static', filename='js/acc.js')}}"></script> {% endblock %}